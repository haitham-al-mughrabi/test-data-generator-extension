<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test All Tabs - Verification</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 6px; }
        .test-section h2 { margin-top: 0; color: #333; }
        .result { margin: 10px 0; padding: 10px; background: #f9f9f9; border-radius: 4px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .tab-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 10px 0; }
        .tab-item { padding: 8px; background: #e9ecef; border-radius: 4px; font-size: 12px; }
        .tab-item strong { color: #495057; }
        button { padding: 8px 16px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>Test All Tabs - Verification</h1>
    
    <div class="test-section">
        <h2>Available Categories & Sub-tabs</h2>
        <button onclick="listAllCategories()">List All Categories</button>
        <div id="categories-list"></div>
    </div>
    
    <div class="test-section">
        <h2>Image Controls Test</h2>
        <button onclick="testImageControls()">Test Image Controls</button>
        <div id="image-controls-test"></div>
    </div>

    <!-- Include scripts -->
    <script src="utils/helpers.js"></script>
    <script src="data/names-data.js"></script>
    <script src="data/saudi-data.js"></script>
    <script src="generators/personal-generators.js"></script>
    <script src="generators/enhanced-personal-generators.js"></script>
    <script src="generators/file-media-generators.js"></script>
    <script src="generators/document-types-generators.js"></script>
    <script src="generators/image-url-generators.js"></script>
    <script src="ui/ui-generator.js"></script>

    <script>
        function listAllCategories() {
            const resultDiv = document.getElementById('categories-list');
            
            // Create a temporary container to test the UI generator
            const tempContainer = document.createElement('div');
            tempContainer.id = 'temp-container';
            tempContainer.style.display = 'none';
            document.body.appendChild(tempContainer);
            
            try {
                // This will create the UI and we can inspect the categories
                createDataGeneratorUI('temp-container');
                
                // Extract categories from the UI generator (we need to access the internal categories array)
                // Since we can't directly access it, we'll count the tabs created
                const tabs = tempContainer.querySelectorAll('.dg-tab');
                const tabsInfo = Array.from(tabs).map((tab, index) => {
                    const tabContent = tempContainer.querySelector(`[data-content="${index}"]`);
                    const subTabs = tabContent ? tabContent.querySelectorAll('.dg-sub-tab') : [];
                    
                    return {
                        title: tab.textContent.trim(),
                        subTabsCount: subTabs.length,
                        subTabs: Array.from(subTabs).map(subTab => subTab.textContent.trim())
                    };
                });
                
                let html = `<div class="result success">✅ Found ${tabsInfo.length} main categories:</div>`;
                html += '<div class="tab-list">';
                
                tabsInfo.forEach((tab, index) => {
                    html += `
                        <div class="tab-item">
                            <strong>${tab.title}</strong><br>
                            ${tab.subTabsCount} sub-tabs<br>
                            <small>${tab.subTabs.join(', ')}</small>
                        </div>
                    `;
                });
                
                html += '</div>';
                
                // Check if Images & Avatars is present
                const hasImagesTab = tabsInfo.some(tab => tab.title === 'Images & Avatars');
                if (hasImagesTab) {
                    html += '<div class="result success">✅ "Images & Avatars" tab found!</div>';
                } else {
                    html += '<div class="result error">❌ "Images & Avatars" tab missing!</div>';
                }
                
                resultDiv.innerHTML = html;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result error">❌ ERROR: ${error.message}</div>`;
            } finally {
                // Clean up
                document.body.removeChild(tempContainer);
            }
        }
        
        function testImageControls() {
            const resultDiv = document.getElementById('image-controls-test');
            
            try {
                // Test image dimension functions
                if (typeof setImageDimensions === 'function' && typeof getImageDimensions === 'function') {
                    setImageDimensions(800, 600);
                    const dims = getImageDimensions();
                    
                    if (dims.width === 800 && dims.height === 600) {
                        // Test image URL generation
                        const testUrls = {
                            placeholder: imageUrlGenerators.placeholderImage(),
                            picsum: imageUrlGenerators.loremPicsumImage(),
                            unsplash: imageUrlGenerators.unsplashImage(),
                            qrCode: imageUrlGenerators.qrCodeUrl()
                        };
                        
                        let html = '<div class="result success">✅ Image controls working correctly!</div>';
                        html += `<div class="result">Current dimensions: ${dims.width} × ${dims.height}</div>`;
                        html += '<div class="result"><strong>Generated URLs:</strong><br>';
                        
                        Object.entries(testUrls).forEach(([name, url]) => {
                            html += `<strong>${name}:</strong> <a href="${url}" target="_blank">${url}</a><br>`;
                        });
                        
                        html += '</div>';
                        resultDiv.innerHTML = html;
                        
                    } else {
                        resultDiv.innerHTML = `<div class="result error">❌ Dimension setting failed. Expected 800x600, got ${dims.width}x${dims.height}</div>`;
                    }
                } else {
                    resultDiv.innerHTML = '<div class="result error">❌ Image dimension functions not available</div>';
                }
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result error">❌ ERROR: ${error.message}</div>`;
            }
        }
        
        // Auto-run tests
        window.onload = function() {
            listAllCategories();
        };
    </script>
</body>
</html>